# Лабораторные работы
## Постановка задачи (Вариант 18)
### Классный руководитель
Сущности: Имеются ученики (фамилия, имя, домашний адрес, телефон, ФИО отца
и матери) и предметы (название).

Процессы: Накапливаются сведения об
успеваемости учеников по предметам с указанием оценок, дат и сведений
о пропусках.

Выходные документы:
+ Выдать список учеников, получивших двойки или пропустивших
занятия в определенный интервал дат.
+ Выдать список учеников и предметов, по которым число пятерок
больше заданного, отсортированный ученикам и предметам.

# Лабораторная работа №1

## ER-диаграмма

![alt_text](er_diag1.png)

## Логическая модель

### Ученик

ID_ученика (INT PRIMARY KEY) - уникальный идентификатор ученика

Имя (VARCHAR) - имя ученика

Фамилия (VARCHAR) - фамилия ученика

Домашний_адрес - адрес проживания

Телефон VARCHAR - контактный телефон

ФИО_матери (VARCHAR) - полное имя матери

ФИО_отца (VARCHAR) - полное имя отца

### Предмет

ID_предмета (INT PRIMARY KEY) - уникаьлный идентификатор предмета

Навзание_предмета (VARCHAR) - название учебного предмета

### Успеваемость

ID_записи (INT PRIMARY KEY) - уникальный идентификатор записи

ID_ученика (INT FOREIGN KEY) - ссылка на ученика

ID_предмета (INT FOREIGN KEY) - ссылка на предмет

Оценка (INT) - полученнная оценка (от 1 до 5)

Дата (DATE) - дата получения оценки

Пропуски (BOOLEAN) - отметка о пропуске

## Физическая модель

    -- Таблица учеников
    CREATE TABLE Ученик (
        ID_ученика INT PRIMARY KEY,
        Фамилия VARCHAR(50) NOT NULL,
        Имя VARCHAR(50) NOT NULL,
        Домашний_адрес VARCHAR(200),
        Телефон VARCHAR(20),
        ФИО_матери VARCHAR(100),
        ФИО_отца VARCHAR(100)
    );

    -- Таблица предметов
    CREATE TABLE Предмет (
        ID_предмета INT PRIMARY KEY,
        Название_предмета VARCHAR(100) NOT NULL UNIQUE
    );

    -- Таблица успеваемости
    CREATE TABLE Успеваемость (
        ID_записи INT PRIMARY KEY,
        ID_ученика INT NOT NULL,
        ID_предмета INT NOT NULL,
        Оценка INT CHECK (Оценка BETWEEN 1 AND 5),
        Дата DATE NOT NULL,
        Пропуски BOOLEAN DEFAULT FALSE,
    
        -- Внешние ключи
        FOREIGN KEY (ID_ученика) REFERENCES Ученик(ID_ученика) 
            ON DELETE RESTRICT ON UPDATE CASCADE,
        FOREIGN KEY (ID_предмета) REFERENCES Предмет(ID_предмета) 
            ON DELETE RESTRICT ON UPDATE CASCADE
    );

## Ответ DeepSeek

### Положительные аспекты:
Полное соответствие постановке задачи - все сущности и атрибуты из условия учтены

Корректная ER-диаграмма - правильно отображены связи между сущностями (1:N)

Нормализованная структура - модель соответствует 3NF, исключено дублирование данных

Правильные типы данных - адекватный выбор VARCHAR, INT, DATE, BOOLEAN

Оптимизация запросов - созданы необходимые индексы для требуемых отчетов

### Рекомендации по улучшению:

+ Добавить ограничение CHECK для оценок (хотя в физической модели оно уже есть)

+ Рассмотреть возможность хранения количества пропусков вместо BOOLEAN, если нужна статистика

+ Добавить индекс по комбинации (Дата, Оценка) для ускорения первого отчета

### SQL-запросы для выходных документов

#### Список учеников с двойками или пропусками за период:
    
    SELECT 
        У.Фамилия,
        У.Имя,
        П.Название_предмета,
        Ус.Оценка,
        Ус.Дата,
        CASE WHEN Ус.Пропуски THEN 'Да' ELSE 'Нет' END AS Пропуск
    FROM Успеваемость Ус
    JOIN Ученик У ON Ус.ID_ученика = У.ID_ученика
    JOIN Предмет П ON Ус.ID_предмета = П.ID_предмета
    WHERE (Ус.Оценка = 2 OR Ус.Пропуски = TRUE)
      AND Ус.Дата BETWEEN '2024-01-01' AND '2024-12-31'
    ORDER BY У.Фамилия, У.Имя, Ус.Дата;

#### Список учеников с количеством пятерок больше заданного:

    SELECT 
        У.Фамилия,
        У.Имя,
        П.Название_предмета,
        COUNT(*) AS Количество_пятерок
    FROM Успеваемость Ус
    JOIN Ученик У ON Ус.ID_ученика = У.ID_ученика
    JOIN Предмет П ON Ус.ID_предмета = П.ID_предмета
    WHERE Ус.Оценка = 5
    GROUP BY У.ID_ученика, П.ID_предмета
    HAVING COUNT(*) > 3  -- заданное число пятерок
    ORDER BY У.Фамилия, У.Имя, П.Название_предмета;

### Оценка выполнения


Модель демонстрирует глубокое понимание принципов проектирования баз данных и готова к промышленной эксплуатации. Все поставленные задачи решены оптимальным образом.

# Лабораторная работа №2

## Таблицы

![ученик](https://github.com/user-attachments/assets/7c9bf333-b476-4571-bc90-117d81f706f9)

![предмет](https://github.com/user-attachments/assets/bb25c673-5b8a-4e7d-a7e3-7160b6166dd1)

![успеваемость](https://github.com/user-attachments/assets/cc54712f-c66a-42b2-bbfe-5d6aa6b626bd)

## Заполнение таблиц данными

![заполнение1](https://github.com/user-attachments/assets/79db3190-659e-426a-8eb2-4f25c6594bbd)

![заполнение2](https://github.com/user-attachments/assets/e9d8654d-8c3b-407d-8367-593cbea91b94)

![заполнение3](https://github.com/user-attachments/assets/875a77c2-592d-45c5-9e6d-1d32cc0817e5)



